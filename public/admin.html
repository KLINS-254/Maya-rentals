<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<style>
body{ font-family:Arial,sans-serif; padding:30px; background:#f4f6f9;}
h2{ color:#6a00f4; margin-bottom:20px;}
input,button{ padding:10px; margin:5px 0; width:100%; border-radius:8px; border:1px solid #ccc; box-sizing:border-box;}
button{ background:#6a00f4; color:white; border:none; cursor:pointer;}
button:hover{ background:#2a8cff;}
.alert{ color:red; margin-top:10px;}
</style>
</head>
<body>

<h2>Admin: Add Funds</h2>

<form id="addFundsForm">
  <label>User ID:</label>
  <input type="number" id="adminUserId" required placeholder="Enter user ID">
  
  <label>Amount (KSH):</label>
  <input type="number" id="adminAmount" required placeholder="Enter amount">
  
  <button type="submit">Add Funds</button>
  <div class="alert" id="alertMsg"></div>
</form>

<script>
// Simple password protection
const ADMIN_PASSWORD = "Papa123"; // change to strong password
let entered = prompt("Enter admin password:");
if(entered !== ADMIN_PASSWORD){
    alert("Access denied!");
    window.location.href="index.html";
}

document.getElementById("addFundsForm").addEventListener("submit", function(e){
    e.preventDefault();

    const userId = parseInt(document.getElementById("adminUserId").value);
    const amount = parseFloat(document.getElementById("adminAmount").value);
    const alertMsg = document.getElementById("alertMsg");

    // Load user list from localStorage
    let users = JSON.parse(localStorage.getItem("userList")) || [];
    let user = users.find(u => u.id === userId);

    if(!user){
        alertMsg.innerText = "User not found!";
        return;
    }

    user.balance = (user.balance || 0) + amount;
    localStorage.setItem("userList", JSON.stringify(users));
    alert(`âœ… Added KSH ${amount.toLocaleString()} to ${user.name}. New balance: KSH ${user.balance.toLocaleString()}`);

    // Reset form
    document.getElementById("addFundsForm").reset();
    alertMsg.innerText = "";
});
</script>

</body>
</html>
